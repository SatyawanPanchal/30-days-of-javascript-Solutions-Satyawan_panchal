<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../js files/countries_data.js">

    </script>
</head>

<body>

    <script>
        //1. Use the countries information, in the data folder. Sort countries by name, by capital, by population -->

        // a. sorting by population

        /*
        countries_data.sort((a,b)=>{
            if(a.population<b.population) return -1
            if(a.population>b.population) return 1
            return 0
           }) 
        
            
           countries_data.forEach(element => {
            console.log(`${element.name}-->${element.population}`);
            
           });   */

        //b. sorting by capital 
        // if you want to sort in descending order interchange 1 and -1 in return statements

        /*
     
        countries_data.sort((a,b)=>{
     
         if(a.capital>b.capital)
         {
             return 1
         }
         if(a.capital<b.capital)
         {
             return -1
         }
         return 0
     
     
        })  
     
     countries_data.forEach(country=>{
         console.log(`${country.capital}`);
         
     })
     
     */
        //Find the 10 most spoken languages:


        // console.log(countries_data);

        // Steps to solve this problem

        // 1. collect all languages into one array called allLanguagesArray
        // 2. sort all of them and collect them in one dimensional array allLanguages
        // 3. create an array which contains unique entry of each language i.e. uniqueLangArray
        // 4. count for no of occurances of each language and collect them in object containing langauge and count i.e. obj here 
        // 5. keep of pushing that array in one array of objects i.e. noOfTimesArray
        // 6. sort this array with variable count showing no of times the laguage is spoken .
        // 7. slice top 10 languages from this sorted array.


        //collect all languages into one array called allLanguagesArray
        let allLanguagesArray = []
        countries_data.forEach(element => {
            allLanguagesArray.push(element.languages.toString())
        });
        console.log(allLanguagesArray);
        allLanguagesArray.sort((a, b) => {
            if (a > b) { return 1 }
            if (a < b) { return -1 }
            return 0
        })
        ////sort all of them and collect them in one dimensional array allLanguages

        let allLanguages = allLanguagesArray.toString().split(",")


        console.log("All langs--->", allLanguages);

        //create an array which contains unique entry of each language i.e. uniqueLangArray
        let uniqueLangArray = []

        allLanguages.forEach(lang => {
            if (uniqueLangArray.includes(lang)) {

            }
            else {
                uniqueLangArray.push(lang)
            }
        })

        console.log("unique langs ---->", uniqueLangArray);

        let noOfTimesArray = []
        //count for no of occurances of each language and collect them in object containing langauge and count i.e. obj here 
        uniqueLangArray.forEach(lang => {

            let count = 0
            let obj = {}

            allLanguages.forEach(langs => {
                if (lang === langs) {
                    count += 1
                }
            })
            obj.language = lang
            obj.count = count
            //keep of pushing that array in one array of objects i.e. noOfTimesArray
            noOfTimesArray.push(obj)



        })

        console.log(noOfTimesArray);
        // sort this on basis of count i.e. no of times spoken 
        noOfTimesArray.sort((a, b) => {
            if (a.count > b.count) { return -1 }
            if (a.count < b.count) { return 1 }
            return 0
        })

        // slice the top 10 langs from this array

        let topTenSpokenLanguages = noOfTimesArray.slice(0, 10)
        console.log(topTenSpokenLanguages);


        //3. Use countries_data.js file create a function which create the ten most populated countries
        /*  output should look like below
        console.log(mostPopulatedCountries(countries, 10))
        
        [
        {country: 'China', population: 1377422166},
        {country: 'India', population: 1295210000},
        {country: 'United States of America', population: 323947000},
        {country: 'Indonesia', population: 258705000},
        {country: 'Brazil', population: 206135893},
        {country: 'Pakistan', population: 194125062},
        {country: 'Nigeria', population: 186988000},
        {country: 'Bangladesh', population: 161006790},
        {country: 'Russian Federation', population: 146599183},
        {country: 'Japan', population: 126960000}
        ]
        
        console.log(mostPopulatedCountries(countries, 3))
        [
        {country: 'China', population: 1377422166},
        {country: 'India', population: 1295210000},
        {country: 'United States of America', population: 323947000}
        ]
        ```
        */
        function mostPopulatedCountries(countries, n = 3) {
            countries.sort((a, b) => {
                if (a.population > b.population) { return -1 }
                if (a.population < b.population) { return 1 }
                return 0
            })

            let topTenPopulated = countries.slice(0, n)
            console.log(topTenPopulated);

            let mostPopulated = []


            topTenPopulated.forEach(desh => {
                let reqObject = {}
                reqObject.country = desh.name
                reqObject.population = desh.population

                mostPopulated.push(reqObject)


            })
            return mostPopulated


        }

        console.log(mostPopulatedCountries(countries_data, 10));

        //4. Try to develop a program which calculate measure of central tendency of a sample(mean, median, mode) and measure of variability(range, variance, standard deviation). In addition to those measures find the min, max, count, percentile, and frequency distribution of the sample. You can create an object called statistics and create all the functions which do statistical calculations as method for the statistics object. Check the output below.
        /*
        const ages = [31, 26, 34, 37, 27, 26, 32, 32, 26,
         27, 27, 24, 32, 33, 27, 25, 26, 38, 37, 31, 34, 24, 33, 29, 26]
        
        console.log('Count:', statistics.count()) // 25
        console.log('Sum: ', statistics.sum()) // 744
        console.log('Min: ', statistics.min()) // 24

        console.log('Max: ', statistics.max()) // 38
        console.log('Range: ', statistics.range() // 14
        console.log('Mean: ', statistics.mean()) // 30
        console.log('Median: ',statistics.median()) // 29
        console.log('Mode: ', statistics.mode()) // {'mode': 26, 'count': 5}
        console.log('Variance: ',statistics.var()) // 17.5
        console.log('Standard Deviation: ', statistics.std()) // 4.2
        console.log('Variance: ',statistics.var()) // 17.5
        console.log('Frequency Distribution: ',statistics.freqDist()) # [(20.0, 26), (16.0, 27), (12.0, 32), (8.0, 37), (8.0, 34), (8.0, 33), (8.0, 31), (8.0, 24), (4.0, 38), (4.0, 29), (4.0, 25)]
        
        */

        const ages = [31, 26, 34, 37, 27, 26, 32, 32, 26,
            27, 27, 24, 32, 33, 27, 25, 26, 38, 37, 31, 34, 24, 33, 29, 26]

        let statistics = {
            Count: function () {
                return ages.length
            },
            
            
            Sum: function () {
                let sum = ages.reduce((accu, ele) => {
                    return accu + ele
                }, 0)
                return sum
            },
            
            
            Min: function () {
                return Math.min(...ages)
            },
            
            
            Max: function () {
                return Math.max(...ages)
            },
            
            
            Range: function () {
                return statistics.Max() - statistics.Min()
            },
            
            
            // method to find mean
            arrMean: function (arr) {
                const sum = arr.reduce((accu, ele) => {
                    return accu + ele
                }, 0)
                return sum / ages.length

            },
            
            
            // method to find median
            arrMedian: function (arr) {
                let length = (arr.length)

                let mid = Math.floor(length / 2)
                let median = null
                if (length % 2 === 0) // if even no of elements in array
                {
                    median = (arr[mid] + arr[mid + 1]) / 2

                }
                else {
                    median = arr[mid]
                }
                return median
            },
            
            
            
            // method to find mode i.e. Most occuring digit

            arrMode: function (arr) {
                const uniqueAges = ages.filter((age, index, arr) => arr.indexOf(age) === index);
                let objectCounter = []

                uniqueAges.forEach(ele => {
                    let objectWithCounts = {}
                    let count = 0
                    arr.forEach(member => {
                        if (ele === member) {
                            count += 1
                        }
                    })
                    objectWithCounts.number = ele
                    objectWithCounts.count = count
                    objectCounter.push(objectWithCounts)

                })
                //  console.log("no with counts -->",objectCounter);


                objectCounter.sort((a, b) => {
                    if (a.count > b.count) { return -1 }
                    if (a.count < b.count) { return 1 }
                    return 0

                })

                // returning the first value of array that contains no 26 with most repeated age

                return Object.values(objectCounter)[0].number
            },

            arrVariance: function (arr) {
                // To find the variance of the given data, you can follow these steps:

                // Step 1: Find the mean (average) of the data.
                // Step 2: Subtract the mean from each data point.
                // Step 3: Square the result of each subtraction.
                // Step 4: Find the sum of all squared differences.
                // Step 5: Divide the sum by the total number of data points (population size) to get the variance.
                let mean = statistics.arrMean(arr)
                let variance = 0
                let yiSquare = []
                let sumOfSquaredDifferences = 0
                arr.forEach(ele => {
                    yiSquare = (ele - mean) ** 2
                    //    console.log(yiSquare);
                    sumOfSquaredDifferences += yiSquare

                })

                variance = sumOfSquaredDifferences / arr.length

                return (variance);
            },

            arrStandDeviation: function (arr) {
                // standard deviation is sqrt of variance only
                let stDev = Math.sqrt(statistics.arrVariance(arr))
                return stDev.toFixed(2)
            }

        }
        console.log('Count:', statistics.Count()) // 25
        console.log('Sum: ', statistics.Sum()) // 744
        console.log('Min: ', statistics.Min()) // 24

        console.log('Max: ', statistics.Max()) // 38
        console.log('Range: ', statistics.Range()) // 14

        console.log("Mean of ages array =", statistics.arrMean(ages));
        console.log("Median of ages array =", statistics.arrMedian(ages));
        console.log("Mode of ages array =", statistics.arrMode(ages));
        console.log("variance==>", statistics.arrVariance(ages));
        console.log("standard deviation ===>", statistics.arrStandDeviation(ages));







    </script>


</body>

</html>